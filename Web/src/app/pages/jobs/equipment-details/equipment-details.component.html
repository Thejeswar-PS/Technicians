<!-- Equipment Details Page -->
<div class="table-container-width table-invisible">
  <!-- Loading indicator -->
  <div
    *ngIf="loading"
    class="d-flex justify-content-center align-items-center"
    style="height: 200px"
  >
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <!-- Page content -->
  <div *ngIf="!loading">
    <!-- Job ID Header -->
    <div class="card">
      <div class="card-body border-0 pt-5">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <button type="button" class="btn btn-primary" (click)="goBack()">
            <i class="bi bi-arrow-left"></i> Back
          </button>
          <div style="text-align: center; flex: 1">
            <h2 class="text-primary fw-bold">Job ID: {{ params.callNbr }}</h2>
          </div>
          <div style="width: 80px"></div>
          <!-- Spacer to center the title -->
        </div>

        <!-- Upload Information Grid -->
        <div class="mb-5">
          <div class="table-responsive">
            <table
              class="table table-row-dashed align-middle text-center fs-6 fw-bold upload-info-table"
            >
              <thead>
                <tr>
                  <th
                    class="text-center"
                    style="
                      background: linear-gradient(to right, #6bdf67, #8ccf4e);
                      color: black;
                    "
                  >
                    Last Uploaded By
                  </th>
                  <th
                    class="text-center"
                    style="
                      background: linear-gradient(to right, #9bc844, #bcb82e);
                      color: black;
                    "
                  >
                    Uploaded On
                  </th>
                  <th
                    class="text-center"
                    style="
                      background: linear-gradient(to right, #d2ae1f, #ff6600);
                      color: black;
                    "
                  >
                    Type
                  </th>
                </tr>
              </thead>
              <tbody
                *ngIf="uploadInfo && uploadInfo.length > 0; else noUploadInfo"
              >
                <tr *ngFor="let upload of uploadInfo; let i = index">
                  <td>{{ getUploadedByDisplayName(upload) }}</td>
                  <td>
                    {{
                      upload?.UploadJobDt | date : "dd-MMM-yyyy HH:mm" || "N/A"
                    }}
                  </td>
                  <td>{{ upload?.Type || "N/A" }}</td>
                </tr>
              </tbody>
              <tbody *ngIf="!uploadInfo || uploadInfo.length === 0">
                <tr>
                  <td colspan="3" class="text-muted text-center py-4">
                    There are no records available.
                  </td>
                </tr>
              </tbody>
            </table>

            <ng-template #noUploadInfo>
              <!-- This template is no longer needed as we handle the message in tbody -->
            </ng-template>
          </div>
        </div>

        <!-- Error/Success Messages -->
        <div class="card" *ngIf="errorMessage || successMessage">
          <div class="card-body">
            <div *ngIf="errorMessage" class="alert alert-danger">
              <div [innerHTML]="errorMessage"></div>
              <br
                *ngIf="
                  showJobNotesLink ||
                  showJobSafetyLink ||
                  showPartsPageLink ||
                  showExpensesPageLink
                "
              />
              <a
                *ngIf="showJobNotesLink"
                style="color: #1200ff; cursor: pointer"
                (click)="navigateToJobNotes()"
              >
                Click here
              </a>
              <span *ngIf="showJobNotesLink">
                to go to Job Notes Info Page</span
              >
              <a
                *ngIf="showJobSafetyLink"
                style="color: #1200ff; cursor: pointer"
                (click)="navigateToJobSafety()"
              >
                Click here
              </a>
              <span *ngIf="showJobSafetyLink"> to go to Job Safety Page</span>
              <a
                *ngIf="showPartsPageLink"
                style="color: #1200ff; cursor: pointer"
                (click)="navigateToJobParts()"
              >
                Click here
              </a>
              <span *ngIf="showPartsPageLink"> to go to Parts Page</span>
              <a
                *ngIf="showExpensesPageLink"
                style="color: #1200ff; cursor: pointer"
                (click)="navigateToJobExpenses()"
              >
                Click here
              </a>
              <span *ngIf="showExpensesPageLink"> to go to Expenses Page</span>
            </div>
            <div *ngIf="successMessage" class="alert alert-success">
              {{ successMessage }}
            </div>
          </div>
        </div>

        <!-- Back Link -->
        <!-- <div style="text-align: left; margin: 10px 0">
      <button type="button" class="btn btn-primary" (click)="goBack()">
        <i class="bi bi-arrow-left"></i>
      </button>
    </div> -->

        <!-- Action Buttons -->
        <div class="card">
          <div class="card-body">
            <div style="text-align: right">
              <button
                *ngIf="uploadJobVisible"
                class="btn btn-primary me-2"
                style="width: 150px; font-size: 10pt"
                [disabled]="!uploadJobEnabled || loading || uploadingJob"
                (click)="uploadJob()"
              >
                <span *ngIf="!uploadingJob">Upload Job</span>
                <span *ngIf="uploadingJob">
                  <i
                    class="spinner-border spinner-border-sm me-2"
                    role="status"
                  ></i>
                  Uploading... {{ jobUploadProgress }}%
                </span>
              </button>

              <button
                *ngIf="uploadExpenseVisible"
                class="btn btn-warning me-2"
                style="width: 200px; font-size: 10pt"
                [disabled]="!uploadExpenseEnabled || uploadingExpenses"
                (click)="uploadExpenses()"
              >
                <span *ngIf="!uploadingExpenses">Upload Expenses</span>
                <span *ngIf="uploadingExpenses">
                  <i
                    class="spinner-border spinner-border-sm me-2"
                    role="status"
                  ></i>
                  Uploading... {{ expenseUploadProgress }}%
                </span>
              </button>

              <button
                *ngIf="helpButtonVisible"
                class="btn btn-secondary me-2"
                style="width: 48px; font-size: 10pt"
                (click)="showHelp()"
              >
                Help
              </button>
            </div>
          </div>
        </div>

        <!-- Expense Upload Progress -->
        <div class="card" *ngIf="uploadingExpenses">
          <div class="card-body">
            <h6>Uploading Expenses...</h6>
            <div class="progress mb-3">
              <div
                class="progress-bar progress-bar-striped progress-bar-animated bg-warning"
                role="progressbar"
                [style.width.%]="expenseUploadProgress"
                [attr.aria-valuenow]="expenseUploadProgress"
                aria-valuemin="0"
                aria-valuemax="100"
              >
                {{ expenseUploadProgress }}%
              </div>
            </div>
            <small class="text-muted">
              <span *ngIf="expenseUploadProgress <= 30"
                >Checking for duplicate entries...</span
              >
              <span
                *ngIf="
                  expenseUploadProgress > 30 && expenseUploadProgress <= 60
                "
                >Validating expense requirements...</span
              >
              <span
                *ngIf="
                  expenseUploadProgress > 60 && expenseUploadProgress < 100
                "
                >Uploading expenses to system...</span
              >
              <span *ngIf="expenseUploadProgress >= 100"
                >Upload completed!</span
              >
            </small>
          </div>
        </div>

        <!-- Job Upload Progress -->
        <div class="card" *ngIf="uploadingJob">
          <div class="card-body">
            <h6>Uploading Job...</h6>
            <div class="progress mb-3">
              <div
                class="progress-bar progress-bar-striped progress-bar-animated bg-primary"
                role="progressbar"
                [style.width.%]="jobUploadProgress"
                [attr.aria-valuenow]="jobUploadProgress"
                aria-valuemin="0"
                aria-valuemax="100"
              >
                {{ jobUploadProgress }}%
              </div>
            </div>
            <small class="text-muted">
              <span *ngIf="jobUploadProgress <= 20"
                >Getting job notes and safety info...</span
              >
              <span *ngIf="jobUploadProgress > 20 && jobUploadProgress <= 40"
                >Validating equipment and PM requirements...</span
              >
              <span *ngIf="jobUploadProgress > 40 && jobUploadProgress <= 60"
                >Checking parts and expenses...</span
              >
              <span *ngIf="jobUploadProgress > 60 && jobUploadProgress < 100"
                >Uploading job to system...</span
              >
              <span *ngIf="jobUploadProgress >= 100">Upload completed!</span>
            </small>
          </div>
        </div>

        <!-- Equipment Table -->
        <div class="card card-xxl-stretch">
          <div class="card-body py-3">
            <!-- begin::Table container -->
            <div class="table-max-height">
              <!-- begin::Table -->
              <table
                class="table table-row-dashed table-row-gray-300 align-middle gs-1 gy-2"
                style="text-align: center; table-layout: fixed"
              >
                <!-- begin::Table head -->
                <thead>
                  <tr class="text-dark fw-bolder badge-light-primary fs-6">
                    <th class="min-w-50px" style="width: 6%">ID</th>
                    <th class="min-w-120px" style="width: 16.5%">Equip No</th>
                    <th class="min-w-100px" style="width: 10%">Make</th>
                    <th class="min-w-100px" style="width: 11%">Model</th>
                    <th class="min-w-100px" style="width: 10%">Serial No</th>
                    <th class="min-w-70px" style="width: 8%">KVA/Batt</th>
                    <th class="min-w-140px" style="width: 16%">Location</th>
                    <th class="min-w-120px" style="width: 12%">Status</th>
                    <th class="min-w-90px" style="width: 10%">Modified</th>
                    <th class="min-w-60px" style="width: 6%">Files</th>
                    <th class="min-w-60px" style="width: 6.5%">Images</th>
                    <th class="min-w-60px d-none" style="width: 6%">Summary</th>
                    <th class="min-w-60px" style="width: 6%">Mode</th>
                    <th class="min-w-60px" style="width: 6%">Edit</th>
                  </tr>
                </thead>
                <!-- end::Table head -->

                <!-- begin::Table body -->
                <tbody
                  class="text-dark mb-1 fs-6"
                  *ngIf="equipmentList && equipmentList.length > 0"
                >
                  <tr *ngFor="let equipment of equipmentList">
                    <!-- Equipment ID -->
                    <td>{{ equipment.equipId }}</td>

                    <!-- Equipment Number (clickable) -->
                    <td>
                      <a
                        href="javascript:void(0)"
                        (click)="navigateToEquipmentReadings(equipment)"
                        class="text-hover-primary fw-bold"
                        style="cursor: pointer; color: #428bca"
                      >
                        {{ equipment.equipNo }}
                      </a>
                    </td>

                    <!-- Make -->
                    <td>{{ equipment.vendorId }}</td>

                    <!-- Model -->
                    <td>{{ equipment.version }}</td>

                    <!-- Serial No -->
                    <td>{{ equipment.serialID }}</td>

                    <!-- KVA/Batt -->
                    <td>{{ equipment.rating }}</td>

                    <!-- Location -->
                    <td>{{ equipment.location }}</td>

                    <!-- Status (with color coding) -->
                    <td>
                      <span
                        [style.color]="
                          getEquipmentStatusDisplay(
                            equipment.codeEquipmentStatus
                          ).color
                        "
                      >
                        {{
                          getEquipmentStatusDisplay(
                            equipment.codeEquipmentStatus
                          ).text
                        }}
                      </span>
                    </td>

                    <!-- Modified Date -->
                    <td>{{ equipment.last_Modifed | date : "dd-MMM-yyyy" }}</td>

                    <!-- Summary column removed -->

                    <!-- Files -->
                    <td>
                      <a
                        href="javascript:void(0)"
                        (click)="openFileUploadModal(equipment)"
                        style="font-size: 18px; color: #2563eb !important"
                        title="Files"
                      >
                        <i class="bi bi-file-earmark-text"></i>
                      </a>
                    </td>

                    <!-- Images -->
                    <td>
                      <a
                        href="javascript:void(0)"
                        (click)="navigateToImageUpload(equipment)"
                        style="font-size: 18px; color: #7c3aed !important"
                        title="Images"
                      >
                        <i class="bi bi-image"></i>
                      </a>
                    </td>

                    <!-- Job Summary Sample - Hidden from UI but kept for integration purposes -->
                    <td class="d-none">
                      <!-- Job Summary Sample link removed - integration only functionality -->
                      <!-- <a
                        href="javascript:void(0)"
                        (click)="navigateToJobSummarySample(equipment)"
                        style="font-size: 18px; color: #059669 !important"
                        title="Job Summary Sample"
                      > -->
                        <!-- <i class="bi bi-graph-up"></i>
                      </a> -->
                    </td>

                    <!-- Mode -->
                    <td>{{ getModeDisplay(equipment.saveStatus) }}</td>

                    <!-- Edit -->
                    <td>
                      <a
                        href="javascript:void(0)"
                        (click)="navigateToEditEquipment(equipment)"
                        style="font-size: 18px; color: #dc2626 !important"
                        title="Edit Equipment"
                      >
                        <i class="bi bi-pencil"></i>
                      </a>
                    </td>
                  </tr>
                </tbody>
                <!-- end::Table body -->
              </table>

              <!-- No data message -->
              <div
                *ngIf="!equipmentList || equipmentList.length === 0"
                class="text-center py-5"
              >
                <div class="d-flex flex-column align-items-center">
                  <p class="text-muted">
                    There is no equipment associated with this job at the
                    moment.
                  </p>
                </div>
              </div>
              <!-- end::Table -->
            </div>
            <!-- end::Table container -->
          </div>
        </div>
      </div>
    </div>

    <!-- File Upload Modal -->
    <div
      *ngIf="showFileUploadModal"
      class="modal d-block"
      tabindex="-1"
      style="z-index: 1055; background-color: rgba(0, 0, 0, 0.4);"
    >
      <div
        class="modal-dialog modal-dialog-centered"
        style="max-width: 85vw; width: 950px;"
      >
        <div
          class="modal-content"
          style="
            border-radius: 12px;
            border: none;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            background: white;
            max-height: 85vh;
          "
        >
          <!-- Modal Header -->
          <div
            class="modal-header"
            style="
              background: #f8f9fa;
              color: #333;
              border-radius: 12px 12px 0 0;
              padding: 1rem 1.5rem;
              border: none;
            "
          >
            <h5 class="modal-title fw-bold mb-0" style="font-size: 1.1rem">
              <i class="bi bi-cloud-upload me-2"></i>
              Upload Files - Equipment {{ selectedEquipment?.equipId }}
            </h5>
            <button
              type="button"
              class="btn-close"
              (click)="closeFileUploadModal()"
              aria-label="Close"
            ></button>
          </div>

          <!-- Modal Body -->
          <div
            class="modal-body"
            style="
              padding: 1.5rem;
              max-height: calc(85vh - 140px);
              overflow-y: auto;
              background: white;
            "
          >
            <!-- Guidelines Section -->
            <div
              class="alert alert-warning mb-3"
              style="
                background: #fff8e1;
                border: 1px solid #ffe082;
                border-radius: 8px;
              "
            >
              <h6 class="fw-bold mb-2" style="color: #b8860b">
                <i class="bi bi-info-circle me-2"></i>Important Guidelines
              </h6>
              <ul class="mb-0" style="font-size: 0.9rem; color: #856404">
                <li>Filenames should not contain spaces â€” use underscores or hyphens instead.</li>
                <li>Supported file types: PDF, JPG, JPEG, DOC, DOCX, TXT, PPTX, XLS, RTF, LOG.</li>
                <li>Only the latest 2 files will be retained; older files are automatically deleted.</li>
              </ul>
            </div>

<!-- Add Attachments Section -->
<div class="attachments-section-compact">
  <div class="header" style="background: #5486ff; color: white; padding: 0.4rem 0.75rem; border-radius: 8px 8px 0 0; font-weight: 600; text-align: center;">
    <i class="bi bi-plus-circle me-2" style="font-weight: bold; font-size: 1.1rem; color: #ffffff !important; text-shadow: 0 0 1px rgba(255,255,255,0.5);"></i> Add Attachments
  </div>

  <div class="body" style="padding: 0.5rem; border: 1px solid #e3f2fd; border-top: none; border-radius: 0 0 8px 8px;">
    <div class="row g-2">
      <div class="col-md-6">
        <label style="font-size: 0.8rem; margin-bottom: 0.2rem; color: #495057;">Select File 1</label>
        <div class="file-input-wrapper position-relative">
          <input 
            type="file" 
            class="form-control form-control-sm" 
            #fileInput1
            (change)="onFileSelected(1, $event)"
            accept=".pdf,.jpg,.jpeg,.doc,.docx,.txt,.pptx,.xls,.rtf,.log"
            [style.background]="selectedFiles[0] ? '#e8f5e8' : '#f8f9fa'"
            [style.border]="selectedFiles[0] ? '2px solid #28a745' : '2px solid #6c757d'"
            [style.font-weight]="selectedFiles[0] ? '600' : '500'"
            style="font-size: 0.8rem; padding: 0.375rem 0.75rem; pointer-events: auto !important; border-radius: 6px; cursor: pointer; transition: all 0.2s ease;"
            onmouseover="this.style.borderColor='#007bff'; this.style.boxShadow='0 0 0 0.2rem rgba(0,123,255,0.25)'"
            onmouseout="this.style.borderColor=this.getAttribute('data-selected') === 'true' ? '#28a745' : '#6c757d'; this.style.boxShadow='none'"
            [attr.data-selected]="selectedFiles[0] ? 'true' : 'false'"
          />
          <i *ngIf="selectedFiles[0]" class="bi bi-check-circle-fill position-absolute" 
             style="right: 8px; top: 50%; transform: translateY(-50%); color: #28a745; font-size: 1rem; pointer-events: none; z-index: 10;"></i>
        </div>
        <div class="filename-display" style="height: 1.5rem; margin-top: 0.25rem;">
          <small *ngIf="selectedFiles[0]" class="text-success d-block" style="font-weight: 600;">
            <i class="bi bi-file-earmark me-1"></i>{{ selectedFiles[0].name }}
          </small>
        </div>
      </div>
      <div class="col-md-6">
        <label style="font-size: 0.8rem; margin-bottom: 0.2rem; color: #495057;">Select File 2</label>
        <div class="file-input-wrapper position-relative">
          <input 
            type="file" 
            class="form-control form-control-sm" 
            #fileInput2
            (change)="onFileSelected(2, $event)"
            accept=".pdf,.jpg,.jpeg,.doc,.docx,.txt,.pptx,.xls,.rtf,.log"
            [style.background]="selectedFiles[1] ? '#e8f5e8' : '#f8f9fa'"
            [style.border]="selectedFiles[1] ? '2px solid #28a745' : '2px solid #6c757d'"
            [style.font-weight]="selectedFiles[1] ? '600' : '500'"
            style="font-size: 0.8rem; padding: 0.375rem 0.75rem; pointer-events: auto !important; border-radius: 6px; cursor: pointer; transition: all 0.2s ease;"
            onmouseover="this.style.borderColor='#007bff'; this.style.boxShadow='0 0 0 0.2rem rgba(0,123,255,0.25)'"
            onmouseout="this.style.borderColor=this.getAttribute('data-selected') === 'true' ? '#28a745' : '#6c757d'; this.style.boxShadow='none'"
            [attr.data-selected]="selectedFiles[1] ? 'true' : 'false'"
          />
          <i *ngIf="selectedFiles[1]" class="bi bi-check-circle-fill position-absolute" 
             style="right: 8px; top: 50%; transform: translateY(-50%); color: #28a745; font-size: 1rem; pointer-events: none; z-index: 10;"></i>
        </div>
        <div class="filename-display" style="height: 1.5rem; margin-top: 0.25rem;">
          <small *ngIf="selectedFiles[1]" class="text-success d-block" style="font-weight: 600;">
            <i class="bi bi-file-earmark me-1"></i>{{ selectedFiles[1].name }}
          </small>
        </div>
      </div>
      </div>
    </div>

    <!-- Validation Messages -->
    <div *ngIf="fileValidationError" class="alert alert-danger mt-2 mb-2" style="padding: 0.5rem 0.75rem; font-size: 0.85rem; border-radius: 4px; border: 1px solid #dc3545; background-color: #f8d7da; color: #721c24;">
      <i class="bi bi-exclamation-triangle me-2"></i>{{ fileValidationError }}
    </div>

    <div class="d-flex justify-content-end gap-2 mt-2">
      <button 
        type="button" 
        class="btn btn-sm" 
        (click)="closeFileUploadModal()"
        style="background: #5486ff; color: white; padding: 0.375rem 1rem; border: none; border-radius: 6px; pointer-events: auto !important; cursor: pointer; font-weight: 600; box-shadow: 0 2px 4px rgba(84, 134, 255, 0.3); transition: all 0.2s ease;"
        onmouseover="this.style.background='#3366ff'; this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(51, 102, 255, 0.4)'"
        onmouseout="this.style.background='#5486ff'; this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(84, 134, 255, 0.3)'"
      >
        <i class="bi bi-x-lg me-1" style="font-weight: bold; font-size: 1.1rem; color: #ffffff !important; text-shadow: 0 0 1px rgba(255,255,255,0.5);"></i> Close
      </button>
      <button 
        type="button" 
        class="btn btn-sm" 
        (click)="uploadFiles()"
        [disabled]="isUploading"
        style="background: #5486ff; color: white; padding: 0.375rem 1rem; border: none; border-radius: 6px; pointer-events: auto !important; cursor: pointer; font-weight: 600; box-shadow: 0 2px 4px rgba(84, 134, 255, 0.3); transition: all 0.2s ease;"
        onmouseover="this.style.background='#3366ff'; this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(51, 102, 255, 0.4)'"
        onmouseout="this.style.background='#5486ff'; this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(84, 134, 255, 0.3)'"
      >
        <i class="bi bi-cloud-upload me-1" style="font-weight: bold; font-size: 1.1rem; color: #ffffff !important; text-shadow: 0 0 1px rgba(255,255,255,0.5);"></i>
        {{ isUploading ? 'Uploading...' : 'Upload' }}
      </button>
    </div>
  </div>
</div>

<!-- Uploaded Attachments Section -->
<div class="attachments-section-compact mt-3" style="border: 1px solid #e3f2fd; border-radius: 8px; overflow: hidden;">
  <div class="header" style="background: #f8f9fa; color: #6c757d; padding: 0.4rem 0.75rem; border-radius: 8px 8px 0 0; font-weight: 600; text-align: center; border-bottom: 1px solid #dee2e6;">
    <i class="bi bi-files me-2"></i>Uploaded Attachments for Equipment: {{ selectedEquipment?.equipId }}
  </div>

  <div class="body" style="padding: 0.5rem; border: 1px solid #e3f2fd; border-top: none; border-radius: 0 0 8px 8px; margin: 0; overflow-x: auto;">
    <table class="table table-hover mb-0" style="margin: 0; font-size: 0.9rem; width: 100%; table-layout: fixed;">
      <thead>
        <tr>
          <th style="background: #5486ff !important; color: white !important; padding: 0.75rem; font-weight: 600; border: none; width: 8%;">No</th>
          <th style="background: #5486ff !important; color: white !important; padding: 0.75rem; font-weight: 600; border: none; width: 35%;">File Name</th>
          <th style="background: #5486ff !important; color: white !important; padding: 0.75rem; font-weight: 600; border: none; width: 20%;">Creation Time</th>
          <th style="background: #5486ff !important; color: white !important; padding: 0.75rem; font-weight: 600; border: none; width: 22%;">Created By</th>
          <th style="background: #5486ff !important; color: white !important; padding: 0.75rem; font-weight: 600; border: none; width: 15%;">Download</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let file of equipmentFiles; let i = index" style="border-bottom: 1px solid #f1f3f4;">
          <td style="padding: 0.75rem; color: #6c757d; text-align: center;">{{ i + 1 }}</td>
          <td style="padding: 0.75rem; word-wrap: break-word;">
            <a
              class="file-link"
              (click)="openAnyFile(file)"
              [title]="'Open ' + getFileName(file)"
              style="color: #007bff; text-decoration: underline; cursor: pointer; font-weight: 500; transition: all 0.2s ease;"
              onmouseover="this.style.color='#0056b3'; this.style.textDecoration='underline'; this.style.fontWeight='600'"
              onmouseout="this.style.color='#007bff'; this.style.textDecoration='underline'; this.style.fontWeight='500'"
            >
              {{ getFileName(file) }}
            </a>
          </td>
          <td style="padding: 0.75rem; color: #373e44; font-weight: 500;">{{ getFileDate(file) | date: 'dd-MMM-yyyy' }}</td>
          <td style="padding: 0.75rem; color: #373e44; font-weight: 500;">{{ getFileCreatedBy(file) }}</td>
          <td style="padding: 0.75rem; text-align: center;">
            <button
              type="button"
              class="btn download-btn"
              (click)="downloadFile(file)"
              [title]="'Download ' + getFileName(file)"
              style="background: #007bff; color: white; border: none; padding: 0.5rem; width: 2.5rem; height: 2.5rem; border-radius: 8px; display: inline-flex; align-items: center; justify-content: center; transition: all 0.2s ease; box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3);"
              onmouseover="this.style.background='#0056b3'; this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0, 86, 179, 0.4)'"
              onmouseout="this.style.background='#007bff'; this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0, 123, 255, 0.3)'"
            >
              <i class="bi bi-download" style="font-size: 1rem; color: white;"></i>
            </button>
          </td>
        </tr>
        <tr *ngIf="!equipmentFiles || equipmentFiles.length === 0">
          <td colspan="5" style="padding: 2rem; text-align: center; color: #6c757d; font-style: italic;">
            No files uploaded yet.
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>




  </div>
</div>
