<!-- PDU Readings Page (styled like UPS Readings) -->
<div class="container-fluid ups-readings-container">
  <!-- Header: Back, Title, Save -->
  <div class="ups-readings-header__top mb-4 d-flex justify-content-between align-items-center">
    <button type="button" class="btn btn-sm btn-primary ups-readings-header__back" (click)="goBack()" [disabled]="saving">
      <i class="bi bi-arrow-left me-2"></i>
      Back
    </button>

    <div class="ups-page-title">
      <h2 class="fw-bold text-primary mb-0">
        <i class="bi bi-speedometer2 me-2"></i>
        PDU Readings & Verification
      </h2>
      <div class="text-dark mt-2">
        <span class="fw-semibold">Job ID: {{ callNbr || 'N/A' }} | Equipment ID: {{ equipId || 'N/A' }} | PDU ID: {{ pduId || 'N/A' }}</span>
      </div>
    </div>

    <div class="d-flex gap-2">
      <button type="button" class="btn btn-sm btn-light-primary" (click)="saveDraft()" [disabled]="saving">
        <span *ngIf="saving" class="spinner-border spinner-border-sm me-2" role="status"></span>
        <i *ngIf="!saving" class="bi bi-file-earmark-text me-2"></i>
        {{ saving ? 'Saving...' : 'Save As Draft' }}
      </button>
      <button type="button" class="btn btn-sm btn-primary ups-readings-header__action" (click)="savePDU()" [disabled]="saving">
        <span *ngIf="saving" class="spinner-border spinner-border-sm me-2" role="status"></span>
        <i *ngIf="!saving" class="bi bi-check-circle me-2"></i>
        {{ saving ? 'Saving...' : 'Save PDU Data' }}
      </button>
    </div>
  </div>

  <!-- Messages -->
  <div class="ups-readings-messages mb-3" *ngIf="errorMessage || successMessage">
    <div *ngIf="errorMessage" class="alert alert-danger d-inline-flex align-items-center">
      <i class="bi bi-exclamation-triangle-fill me-2"></i>
      <span>{{ errorMessage }}</span>
    </div>
    <div *ngIf="successMessage" class="alert alert-success d-inline-flex align-items-center">
      <i class="bi bi-check-circle-fill me-2"></i>
      <span>{{ successMessage }}</span>
    </div>
  </div>

  <!-- Main card wrapper matching UPS styling -->
  <div class="card shadow-sm ups-main-card">
    <div class="card-body">
      <div class="ups-readings-form">

  <!-- Equipment Verification -->
  <section class="ups-readings-section">
    <div class="ups-section-card">
      <div class="ups-section-header">
        <div class="ups-section-title">
          <i class="bi bi-gear-wide-connected me-2 text-primary"></i>
          <h5 class="mb-0">Equipment Verification</h5>
          <small class="text-muted">Verify PDU equipment details and specifications</small>
        </div>
      </div>
      <div class="ups-section-content show">
        <form class="ups-form" [formGroup]="equipmentForm">
          <div class="form-group-modern">
            <div class="row g-3">
              <div class="col-md-3">
                <div class="form-floating">
                  <select class="form-select" formControlName="manufacturer" id="manufacturer">
                    <option value="" disabled>Select manufacturer</option>
                    <option *ngFor="let m of manufacturers" [value]="m.value">{{ m.label }}</option>
                  </select>
                  <label for="manufacturer">Make</label>
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-floating">
                  <input type="text" class="form-control" formControlName="modelNo" id="modelNo" placeholder="Model No" />
                  <label for="modelNo">Model No</label>
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-floating">
                  <input type="text" class="form-control" formControlName="serialNo" id="serialNo" placeholder="Serial No" />
                  <label for="serialNo">Serial No</label>
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-floating">
                  <input type="text" class="form-control" formControlName="location" id="location" placeholder="Location" />
                  <label for="location">Location</label>
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-floating">
                  <input type="date" class="form-control" formControlName="dateCode" id="dateCode" placeholder="Date Code" />
                  <label for="dateCode">Date Code</label>
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-floating">
                  <input type="text" class="form-control" formControlName="kva" id="kva" placeholder="KVA Rating" />
                  <label for="kva">KVA Rating</label>
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-floating">
                  <input type="text" class="form-control" formControlName="temperature" id="temperature" placeholder="Temperature" />
                  <label for="temperature">Temperature (F)</label>
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-floating">
                  <select class="form-select" formControlName="status" id="status">
                    <option *ngFor="let s of statusOptions" [value]="s.value">{{ s.label }}</option>
                  </select>
                  <label for="status">Status</label>
                </div>
              </div>
              <div class="col-12">
                <div class="form-floating">
                  <textarea rows="3" class="form-control" formControlName="statusNotes" id="statusNotes" placeholder="Reason for Status"></textarea>
                  <label for="statusNotes">Reason for Status</label>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </section>
  

<!-- Equipment Reconciliation -->
<section class="ups-readings-section power-verification">
  <div class="ups-section-card">
    <div class="ups-section-header d-flex align-items-center justify-content-between">
      <div class="ups-section-title">
        <i class="bi bi-check-square me-2 text-success"></i>
        <h5 class="mb-0">Equipment Reconciliation</h5>
        <small class="text-muted">Verify recorded information matches actual equipment</small>
      </div>
      <div class="d-flex align-items-center gap-3 ms-auto" [formGroup]="reconciliationForm">
        <div class="form-check mb-0">
          <input
            id="verified"
            class="form-check-input"
            type="checkbox"
            formControlName="verified"
            style="border: 2px solid #009EF7; width: 20px; height: 20px;"
          />
          <label for="verified" class="form-check-label fw-bold text-success mb-0">
            <i class="bi bi-check-circle me-1"></i>
            Verified
          </label>
        </div>
      </div>
    </div>
    <div class="ups-section-content show">
      <form class="ups-form" [formGroup]="reconciliationForm">
        <div class="form-group-modern">
          <div class="row g-3">
            <div class="col-md-4">
              <div class="form-floating">
                <input type="text" class="form-control" formControlName="recModel" readonly id="recModel" placeholder="Model" />
                <label for="recModel">Model</label>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-floating">
                <select class="form-select" formControlName="recModelCorrect" id="recModelCorrect">
                  <option *ngFor="let o of yesNoOptions" [value]="o.value">{{ o.label }}</option>
                </select>
                <label for="recModelCorrect">Is this Correct?</label>
              </div>
            </div>
            <div class="col-md-5">
              <div class="form-floating">
                <input type="text" class="form-control text-danger" formControlName="actModel" [readonly]="reconciliationForm.get('recModelCorrect')?.value === 'YS'" id="actModel" placeholder="Actual Model" />
                <label for="actModel">Actual</label>
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-floating">
                <input type="text" class="form-control" formControlName="recSerialNo" readonly id="recSerialNo" placeholder="Serial No" />
                <label for="recSerialNo">Serial No</label>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-floating">
                <select class="form-select" formControlName="recSerialNoCorrect" id="recSerialNoCorrect">
                  <option *ngFor="let o of yesNoOptions" [value]="o.value">{{ o.label }}</option>
                </select>
                <label for="recSerialNoCorrect">Is this Correct?</label>
              </div>
            </div>
            <div class="col-md-5">
              <div class="form-floating">
                <input type="text" class="form-control text-danger" formControlName="actSerialNo" [readonly]="reconciliationForm.get('recSerialNoCorrect')?.value === 'YS'" id="actSerialNo" placeholder="Actual Serial No" />
                <label for="actSerialNo">Actual</label>
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-floating">
                <input type="text" class="form-control" formControlName="kvaSize" readonly id="kvaSize" placeholder="KVA Size" />
                <label for="kvaSize">KVA Size</label>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-floating">
                <select class="form-select" formControlName="kvaCorrect" id="kvaCorrect">
                  <option *ngFor="let o of yesNoOptions" [value]="o.value">{{ o.label }}</option>
                </select>
                <label for="kvaCorrect">Is this Correct?</label>
              </div>
            </div>
            <div class="col-md-5">
              <div class="form-floating">
                <input type="text" class="form-control text-danger" formControlName="actKVA" [readonly]="reconciliationForm.get('kvaCorrect')?.value === 'YS'" id="actKVA" placeholder="Actual KVA" />
                <label for="actKVA">Actual</label>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>


<!-- Visual and Mechanical Verification -->
<section class="ups-readings-section">
  <div class="ups-section-card">
    <div class="ups-section-header">
      <div class="ups-section-title">
        <i class="bi bi-tools me-2 text-primary"></i>
        <h5 class="mb-0">PDU Visual and Mechanical Verification</h5>
        <small class="text-muted">Pass/Fail checks for critical components</small>
      </div>
    </div>
    <div class="ups-section-content show">
      <form class="ups-form" [formGroup]="visualForm">
        <div class="form-group-modern">
      <div class="row g-3">
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="busswork" id="busswork">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="busswork">1. Busswork</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="transformers" id="transformers">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="transformers">2. Transformers</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="powerConn" id="powerConn">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="powerConn">3. Power Connections</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="mainCirBreaks" id="mainCirBreaks">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="mainCirBreaks">4. Main Circuit Breakers</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="subfeedCirBreaks" id="subfeedCirBreaks">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="subfeedCirBreaks">5. Subfeed Circuit Breakers</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="currentCTs" id="currentCTs">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="currentCTs">6. Current CT's</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="circuitBoards" id="circuitBoards">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="circuitBoards">7. Circuit Boards</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="filterCapacitors" id="filterCapacitors">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="filterCapacitors">8. Filter Capacitors</label>
        </div>
      </div>

      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="epoConn" id="epoConn">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="epoConn">9. EPO Connections</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="wiringConn" id="wiringConn">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="wiringConn">10. Wiring Connections</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="ribbonCables" id="ribbonCables">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="ribbonCables">11. Ribbon Cables / Terminals</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="compAirClean" id="compAirClean">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="compAirClean">12. Compressed Air Cleaned</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="staticSwitch" id="staticSwitch">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="staticSwitch">13. Test if static Switch is installed</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="frontPanel" id="frontPanel">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="frontPanel">14. Verify front panel indicators</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="internalPower" id="internalPower">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="internalPower">15. Verify internal power supply</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="localMonitoring" id="localMonitoring">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="localMonitoring">16. Verify local monitoring</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <select class="form-select" formControlName="localEPO" id="localEPO">
            <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
          </select>
          <label for="localEPO">17. Verify local EPO</label>
        </div>
      </div>

      <div class="col-md-3">
        <div class="form-floating">
          <input type="text" class="form-control" formControlName="neutralCurrent" id="neutralCurrent" />
          <label for="neutralCurrent">Neutral Current</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating">
          <input type="text" class="form-control" formControlName="groundCurrent" id="groundCurrent" />
          <label for="groundCurrent">Ground Current</label>
        </div>
      </div>
      <div class="col-12">
        <div class="form-floating">
          <textarea rows="3" class="form-control" placeholder="Please note the reason, if any." formControlName="comments" id="comments"></textarea>
          <label for="comments" class="form-label">Comments</label>
        </div>
      </div>
      </div>
        </div>
      </form>
    </div>
  </div>
</section>

<!-- Power Verification -->
<section class="ups-readings-section">
  <div class="ups-section-card">
    <div class="ups-section-header" (click)="showPowerVerification = !showPowerVerification">
      <div class="ups-section-title">
        <i class="bi bi-lightning me-2 text-danger"></i>
        <h5 class="mb-0">Power Verification</h5>
        <small class="text-muted">Verify electrical power readings and thresholds</small>
      </div>
      <i
        class="bi transition-transform"
        [class.bi-chevron-down]="showPowerVerification"
        [class.bi-chevron-right]="!showPowerVerification"
        [class.rotate-90]="showPowerVerification"
      ></i>
    </div>
    <div class="ups-section-content" [class.show]="showPowerVerification">
      <!-- Input Section -->
      <div class="mb-4">
        <form [formGroup]="inputForm">
          <!-- Inline Configuration Bar -->
          <div class="input-config-bar d-flex align-items-center justify-content-between p-3 bg-light border rounded-3 shadow-sm">
            <!-- Input Configuration Dropdown -->
            <div class="config-item d-flex align-items-center">
              <label class="form-label mb-0 me-2 fw-semibold text-white input-label">
                <i class="bi bi-arrow-down-circle me-1"></i>Input:
              </label>
              <select
                class="form-select form-select-sm custom-select"
                formControlName="inputVoltage"
                (change)="onInputVoltageChange($any($event.target).value)"
                style="min-width: 150px; max-width: 150px;"
              >
                <option value="0">Select...</option>
                <option value="1">120V</option>
                <option value="2">240V</option>
                <option value="3">208V</option>
                <option value="4">480V</option>
                <option value="6">575V</option>
                <option value="5">600V</option>
              </select>
            </div>

            <!-- Tolerance Display -->
            <div class="tolerance-info d-flex align-items-center" *ngIf="selectedInputVoltage && selectedInputVoltage !== '0'">
              <div class="d-flex flex-column">
                <small class="text-primary fw-semibold mb-1">
                  <i class="bi bi-info-circle me-1"></i>
                  V-Tolerance: {{ getInputVoltageTolerance(selectedInputVoltage) }}
                </small>
                <small class="text-info fw-semibold">
                  <i class="bi bi-speedometer me-1"></i>
                  Freq: 55 Hz - 65 Hz
                </small>
              </div>
            </div>

            <!-- Filter Current Toggle -->
            <div class="config-item d-flex align-items-center">
              <div class="custom-toggle-container">
                <input
                  class="custom-toggle-input"
                  type="checkbox"
                  formControlName="inputFilterCurrent"
                  id="inputFilterCurrent"
                />
                <label class="custom-toggle-label" for="inputFilterCurrent">
                  <span class="toggle-switch"></span>
                  <span class="toggle-text">
                    <i class="bi bi-funnel me-1"></i>Filter Current
                  </span>
                </label>
              </div>
            </div>

            <!-- THD % Toggle -->
            <div class="config-item d-flex align-items-center">
              <div class="custom-toggle-container">
                <input
                  class="custom-toggle-input"
                  type="checkbox"
                  formControlName="inputThdPercent"
                  id="inputThdPercent"
                />
                <label class="custom-toggle-label" for="inputThdPercent">
                  <span class="toggle-switch"></span>
                  <span class="toggle-text">
                    <i class="bi bi-graph-up me-1"></i>THD %
                  </span>
                </label>
              </div>
            </div>
          </div>

          <!-- Input Phase Measurements -->
          <div class="mb-4">
            <h6 class="fw-bold text-success mb-3">
              <i class="bi bi-plug me-2"></i>
              Input Phase Measurements
              <small class="text-muted ms-2">Voltage, Current, and Frequency readings</small>
            </h6>

            <!-- 120V -->
            <div *ngIf="showInput120" class="mb-4">
              <div class="row g-3">
                <!-- Voltage A Card -->
                <div class="col-xl-3 col-lg-4 col-md-6">
                  <div class="power-measurement-card">
                    <div class="power-card-header">
                      <div class="power-card-title">
                        <span class="fw-semibold text-dark">Voltage A</span>
                      </div>
                    </div>
                    <div class="power-card-body">
                      <div class="row g-2">
                        <div class="col-8">
                          <div class="form-floating">
                            <input type="number" class="form-control power-input" formControlName="input120VoltA" step="0.01" id="input120VoltA" />
                            <label for="input120VoltA" class="text-muted">Voltage</label>
                          </div>
                        </div>
                        <div class="col-4">
                          <div class="form-floating">
                            <select class="form-select power-select" formControlName="input120VoltA_PF" id="input120VoltA_PF">
                              <option value="">Select...</option>
                              <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                            </select>
                            <label for="input120VoltA_PF" class="text-muted">Status</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Current A Card -->
                <div class="col-xl-3 col-lg-4 col-md-6">
                  <div class="power-measurement-card">
                    <div class="power-card-header">
                      <div class="power-card-title">
                        <span class="fw-semibold text-dark">Current A</span>
                      </div>
                    </div>
                    <div class="power-card-body">
                      <div class="row g-2">
                        <div class="col-8">
                          <div class="form-floating">
                            <input type="number" class="form-control power-input" formControlName="input120CurrA" step="0.01" id="input120CurrA" />
                            <label for="input120CurrA" class="text-muted">Current</label>
                          </div>
                        </div>
                        <div class="col-4">
                          <div class="form-floating">
                            <select class="form-select power-select" formControlName="input120CurrA_PF" id="input120CurrA_PF">
                              <option value="">Select...</option>
                              <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                            </select>
                            <label for="input120CurrA_PF" class="text-muted">Status</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Frequency Card -->
                <div class="col-xl-3 col-lg-4 col-md-6">
                  <div class="power-measurement-card">
                    <div class="power-card-header">
                      <div class="power-card-title">
                        <span class="fw-semibold text-dark">Frequency</span>
                      </div>
                    </div>
                    <div class="power-card-body">
                      <div class="row g-2">
                        <div class="col-8">
                          <div class="form-floating">
                            <input type="number" class="form-control power-input" formControlName="input120Freq" step="0.01" id="input120Freq" />
                            <label for="input120Freq" class="text-muted">Frequency</label>
                          </div>
                        </div>
                        <div class="col-4">
                          <div class="form-floating">
                            <select class="form-select power-select" formControlName="input120Freq_PF" id="input120Freq_PF">
                              <option value="">Select...</option>
                              <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                            </select>
                            <label for="input120Freq_PF" class="text-muted">Status</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

    <!-- 240V -->
            <div *ngIf="showInput240" class="mb-4">
              <div class="row g-3">
                <!-- Voltage A -->
                <div class="col-xl-3 col-lg-4 col-md-6">
                  <div class="power-measurement-card">
                    <div class="power-card-header">
                      <div class="power-card-title">
                        <span class="fw-semibold text-dark">Voltage A</span>
                      </div>
                    </div>
                    <div class="power-card-body">
                      <div class="row g-2">
                        <div class="col-8">
                          <div class="form-floating">
                            <input type="number" class="form-control power-input" formControlName="input240VoltA" step="0.01" id="input240VoltA" />
                            <label for="input240VoltA" class="text-muted">Voltage</label>
                          </div>
                        </div>
                        <div class="col-4">
                          <div class="form-floating">
                            <select class="form-select power-select" formControlName="input240VoltA_PF" id="input240VoltA_PF">
                              <option value="">Select...</option>
                              <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                            </select>
                            <label for="input240VoltA_PF" class="text-muted">Status</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Current A -->
                <div class="col-xl-3 col-lg-4 col-md-6">
                  <div class="power-measurement-card">
                    <div class="power-card-header">
                      <div class="power-card-title">
                        <span class="fw-semibold text-dark">Current A</span>
                      </div>
                    </div>
                    <div class="power-card-body">
                      <div class="row g-2">
                        <div class="col-8">
                          <div class="form-floating">
                            <input type="number" class="form-control power-input" formControlName="input240CurrA" step="0.01" id="input240CurrA" />
                            <label for="input240CurrA" class="text-muted">Current</label>
                          </div>
                        </div>
                        <div class="col-4">
                          <div class="form-floating">
                            <select class="form-select power-select" formControlName="input240CurrA_PF" id="input240CurrA_PF">
                              <option value="">Select...</option>
                              <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                            </select>
                            <label for="input240CurrA_PF" class="text-muted">Status</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Voltage B -->
                <div class="col-xl-3 col-lg-4 col-md-6">
                  <div class="power-measurement-card">
                    <div class="power-card-header">
                      <div class="power-card-title">
                        <span class="fw-semibold text-dark">Voltage B</span>
                      </div>
                    </div>
                    <div class="power-card-body">
                      <div class="row g-2">
                        <div class="col-8">
                          <div class="form-floating">
                            <input type="number" class="form-control power-input" formControlName="input240VoltB" step="0.01" id="input240VoltB" />
                            <label for="input240VoltB" class="text-muted">Voltage</label>
                          </div>
                        </div>
                        <div class="col-4">
                          <div class="form-floating">
                            <select class="form-select power-select" formControlName="input240VoltB_PF" id="input240VoltB_PF">
                              <option value="">Select...</option>
                              <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                            </select>
                            <label for="input240VoltB_PF" class="text-muted">Status</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Current B -->
                <div class="col-xl-3 col-lg-4 col-md-6">
                  <div class="power-measurement-card">
                    <div class="power-card-header">
                      <div class="power-card-title">
                        <span class="fw-semibold text-dark">Current B</span>
                      </div>
                    </div>
                    <div class="power-card-body">
                      <div class="row g-2">
                        <div class="col-8">
                          <div class="form-floating">
                            <input type="number" class="form-control power-input" formControlName="input240CurrB" step="0.01" id="input240CurrB" />
                            <label for="input240CurrB" class="text-muted">Current</label>
                          </div>
                        </div>
                        <div class="col-4">
                          <div class="form-floating">
                            <select class="form-select power-select" formControlName="input240CurrB_PF" id="input240CurrB_PF">
                              <option value="">Select...</option>
                              <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                            </select>
                            <label for="input240CurrB_PF" class="text-muted">Status</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Frequency -->
                <div class="col-xl-3 col-lg-4 col-md-6">
                  <div class="power-measurement-card">
                    <div class="power-card-header">
                      <div class="power-card-title">
                        <span class="fw-semibold text-dark">Frequency</span>
                      </div>
                    </div>
                    <div class="power-card-body">
                      <div class="row g-2">
                        <div class="col-8">
                          <div class="form-floating">
                            <input type="number" class="form-control power-input" formControlName="input240Freq" step="0.01" id="input240Freq" />
                            <label for="input240Freq" class="text-muted">Frequency</label>
                          </div>
                        </div>
                        <div class="col-4">
                          <div class="form-floating">
                            <select class="form-select power-select" formControlName="input240Freq_PF" id="input240Freq_PF">
                              <option value="">Select...</option>
                              <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                            </select>
                            <label for="input240Freq_PF" class="text-muted">Status</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

    <!-- 208V -->
    <div *ngIf="showInput208" class="mb-3">
      <div class="row g-3">
        <!-- Voltage A-B -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage A-B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input208VoltAB" step="0.01" id="input208VoltAB" />
                    <label for="input208VoltAB" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('AB') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(inputForm.value.input208VoltAB) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input208VoltAB_PF" id="input208VoltAB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input208VoltAB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current A -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input208CurrA" step="0.01" id="input208CurrA" />
                    <label for="input208CurrA" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input208CurrA_PF" id="input208CurrA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input208CurrA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage B-C -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage B-C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input208VoltBC" step="0.01" id="input208VoltBC" />
                    <label for="input208VoltBC" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('BC') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(inputForm.value.input208VoltBC) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input208VoltBC_PF" id="input208VoltBC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input208VoltBC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current B -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input208CurrB" step="0.01" id="input208CurrB" />
                    <label for="input208CurrB" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input208CurrB_PF" id="input208CurrB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input208CurrB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage C-A -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage C-A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input208VoltCA" step="0.01" id="input208VoltCA" />
                    <label for="input208VoltCA" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('CA') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(inputForm.value.input208VoltCA) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input208VoltCA_PF" id="input208VoltCA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input208VoltCA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current C -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input208CurrC" step="0.01" id="input208CurrC" />
                    <label for="input208CurrC" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input208CurrC_PF" id="input208CurrC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input208CurrC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Frequency -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Frequency</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input208Freq" step="0.01" id="input208Freq" />
                    <label for="input208Freq" class="text-muted">Frequency</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input208Freq_PF" id="input208Freq_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input208Freq_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 480V -->
    <div *ngIf="showInput480" class="mb-3">
      <div class="row g-3">
        <!-- Voltage A-B -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage A-B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input480VoltAB" step="0.01" id="input480VoltAB" />
                    <label for="input480VoltAB" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('AB') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(inputForm.value.input480VoltAB) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input480VoltAB_PF" id="input480VoltAB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input480VoltAB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current A -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input480CurrA" step="0.01" id="input480CurrA" />
                    <label for="input480CurrA" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input480CurrA_PF" id="input480CurrA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input480CurrA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage B-C -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage B-C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input480VoltBC" step="0.01" id="input480VoltBC" />
                    <label for="input480VoltBC" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('BC') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(inputForm.value.input480VoltBC) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input480VoltBC_PF" id="input480VoltBC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input480VoltBC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current B -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input480CurrB" step="0.01" id="input480CurrB" />
                    <label for="input480CurrB" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input480CurrB_PF" id="input480CurrB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input480CurrB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage C-A -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage C-A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input480VoltCA" step="0.01" id="input480VoltCA" />
                    <label for="input480VoltCA" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('CA') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(inputForm.value.input480VoltCA) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input480VoltCA_PF" id="input480VoltCA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input480VoltCA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current C -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input480CurrC" step="0.01" id="input480CurrC" />
                    <label for="input480CurrC" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input480CurrC_PF" id="input480CurrC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input480CurrC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Frequency -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Frequency</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input480Freq" step="0.01" id="input480Freq" />
                    <label for="input480Freq" class="text-muted">Frequency</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input480Freq_PF" id="input480Freq_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input480Freq_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 575V -->
    <div *ngIf="showInput575" class="mb-3">
      <div class="row g-3">
        <!-- Voltage A-B -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage A-B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input575VoltAB" step="0.01" id="input575VoltAB" />
                    <label for="input575VoltAB" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('AB') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(inputForm.value.input575VoltAB) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input575VoltAB_PF" id="input575VoltAB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input575VoltAB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current A -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input575CurrA" step="0.01" id="input575CurrA" />
                    <label for="input575CurrA" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input575CurrA_PF" id="input575CurrA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input575CurrA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage B-C -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage B-C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input575VoltBC" step="0.01" id="input575VoltBC" />
                    <label for="input575VoltBC" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('BC') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(inputForm.value.input575VoltBC) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input575VoltBC_PF" id="input575VoltBC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input575VoltBC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current B -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input575CurrB" step="0.01" id="input575CurrB" />
                    <label for="input575CurrB" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input575CurrB_PF" id="input575CurrB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input575CurrB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage C-A -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage C-A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input575VoltCA" step="0.01" id="input575VoltCA" />
                    <label for="input575VoltCA" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('CA') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(inputForm.value.input575VoltCA) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input575VoltCA_PF" id="input575VoltCA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input575VoltCA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current C -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input575CurrC" step="0.01" id="input575CurrC" />
                    <label for="input575CurrC" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input575CurrC_PF" id="input575CurrC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input575CurrC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Frequency -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Frequency</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input575Freq" step="0.01" id="input575Freq" />
                    <label for="input575Freq" class="text-muted">Frequency</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input575Freq_PF" id="input575Freq_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input575Freq_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 600V -->
    <div *ngIf="showInput600" class="mb-3">
      <div class="row g-3">
        <!-- Voltage A-B -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage A-B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input600VoltAB" step="0.01" id="input600VoltAB" />
                    <label for="input600VoltAB" class="text-muted">Voltage</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input600VoltAB_PF" id="input600VoltAB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input600VoltAB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
              <div class="p-n-display-inline mt-1">
                <small class="text-muted d-flex align-items-center justify-content-between">
                  <span>
                    <i class="bi bi-calculator text-info me-1"></i>
                    {{ getPhaseToNeutralLabel('AB') }}:
                  </span>
                  <span class="badge bg-light text-dark ms-2">
                    {{ calculatePhaseToNeutral(inputForm.value.input600VoltAB) || '—' }}V
                  </span>
                </small>
              </div>
            </div>
          </div>
        </div>

        <!-- Current A -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input600CurrA" step="0.01" id="input600CurrA" />
                    <label for="input600CurrA" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input600CurrA_PF" id="input600CurrA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input600CurrA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage B-C -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage B-C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input600VoltBC" step="0.01" id="input600VoltBC" />
                    <label for="input600VoltBC" class="text-muted">Voltage</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input600VoltBC_PF" id="input600VoltBC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input600VoltBC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
              <div class="p-n-display-inline mt-1">
                <small class="text-muted d-flex align-items-center justify-content-between">
                  <span>
                    <i class="bi bi-calculator text-info me-1"></i>
                    {{ getPhaseToNeutralLabel('BC') }}:
                  </span>
                  <span class="badge bg-light text-dark ms-2">
                    {{ calculatePhaseToNeutral(inputForm.value.input600VoltBC) || '—' }}V
                  </span>
                </small>
              </div>
            </div>
          </div>
        </div>

        <!-- Current B -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input600CurrB" step="0.01" id="input600CurrB" />
                    <label for="input600CurrB" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input600CurrB_PF" id="input600CurrB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input600CurrB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage C-A -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage C-A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input600VoltCA" step="0.01" id="input600VoltCA" />
                    <label for="input600VoltCA" class="text-muted">Voltage</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input600VoltCA_PF" id="input600VoltCA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input600VoltCA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
              <div class="p-n-display-inline mt-1">
                <small class="text-muted d-flex align-items-center justify-content-between">
                  <span>
                    <i class="bi bi-calculator text-info me-1"></i>
                    {{ getPhaseToNeutralLabel('CA') }}:
                  </span>
                  <span class="badge bg-light text-dark ms-2">
                    {{ calculatePhaseToNeutral(inputForm.value.input600VoltCA) || '—' }}V
                  </span>
                </small>
              </div>
            </div>
          </div>
        </div>

        <!-- Current C -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input600CurrC" step="0.01" id="input600CurrC" />
                    <label for="input600CurrC" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input600CurrC_PF" id="input600CurrC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input600CurrC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Frequency -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Frequency</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input type="number" class="form-control power-input" formControlName="input600Freq" step="0.01" id="input600Freq" />
                    <label for="input600Freq" class="text-muted">Frequency</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="input600Freq_PF" id="input600Freq_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="input600Freq_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end 600V input section -->
            <!-- Input Filter Current Detail Section -->
            <div *ngIf="showInputFilterCurrent" class="dynamic-section mt-3">
              <div class="mb-3">
                <h6 class="fw-bold text-primary mb-3">
                  <i class="bi bi-funnel me-2"></i>
                  Input Filter Current Measurements
                  <small class="text-muted ms-2">Filter current readings for each phase</small>
                </h6>

                <div class="row g-3">
                  <div class="col-xl-4 col-lg-6 col-md-12" *ngFor="let phase of ['A','B','C']; let i = index">
                    <div class="power-measurement-card">
                      <div class="power-card-header">
                        <div class="power-card-title">
                          <i class="bi bi-electric-scooter text-primary me-2"></i>
                          <span class="fw-semibold text-dark">Filter Current {{ phase }}</span>
                        </div>
                      </div>
                      <div class="power-card-body">
                        <div class="row g-2">
                          <div class="col-8">
                            <div class="form-floating">
                              <input
                                type="text"
                                class="form-control power-input"
                                [formControlName]="'filterCurrent' + phase"
                                [id]="'inputFilterCurrent' + phase"
                              />
                              <label class="text-muted" [for]="'inputFilterCurrent' + phase">Current (A)</label>
                            </div>
                          </div>
                          <div class="col-4">
                            <div class="form-floating">
                              <select
                                class="form-select power-select"
                                [formControlName]="'filterCurrent' + phase + '_PF'"
                                [id]="'inputFilterCurrent' + phase + 'Status'"
                              >
                                <option value="">Select status...</option>
                                <option value="P">Pass</option>
                                <option value="F">Fail</option>
                                <option value="A">N/A</option>
                              </select>
                              <label class="text-muted" [for]="'inputFilterCurrent' + phase + 'Status'">Status</label>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Input THD Detail Section -->
            <div *ngIf="showInputTHD" class="dynamic-section mt-3">
              <div class="mb-3">
                <h6 class="fw-bold text-warning mb-3">
                  <i class="bi bi-graph-up-arrow me-2"></i>
                  Input THD (Total Harmonic Distortion) Measurements
                  <small class="text-muted ms-2">THD percentage readings for each phase</small>
                </h6>

                <div class="row g-3">
                  <div class="col-xl-4 col-lg-6 col-md-12" *ngFor="let phase of ['A','B','C']; let i = index">
                    <div class="power-measurement-card">
                      <div class="power-card-header">
                        <div class="power-card-title">
                          <i class="bi bi-activity text-warning me-2"></i>
                          <span class="fw-semibold text-dark">THD {{ phase }}</span>
                        </div>
                      </div>
                      <div class="power-card-body">
                        <div class="row g-2">
                          <div class="col-8">
                            <div class="form-floating">
                              <input
                                type="text"
                                class="form-control power-input"
                                [formControlName]="'inputThd' + phase"
                                [id]="'inputThd' + phase"
                              />
                              <label class="text-muted" [for]="'inputThd' + phase">THD (%)</label>
                            </div>
                          </div>
                          <div class="col-4">
                            <div class="form-floating">
                              <select
                                class="form-select power-select"
                                [formControlName]="'inputThd' + phase + '_PF'"
                                [id]="'inputThd' + phase + 'Status'"
                              >
                                <option value="">Select status...</option>
                                <option value="P">Pass</option>
                                <option value="F">Fail</option>
                                <option value="A">N/A</option>
                              </select>
                              <label class="text-muted" [for]="'inputThd' + phase + 'Status'">Status</label>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- End Input Phase Measurements -->
        </form>
      </div>

      <!-- Output Section -->
      <div class="border-top pt-4">
        <form [formGroup]="outputForm">
          <!-- Output Configuration Bar -->
          <div class="input-config-bar d-flex align-items-center justify-content-between p-3 bg-light border rounded-3 shadow-sm mb-4">
            <!-- Output Configuration Dropdown -->
            <div class="config-item d-flex align-items-center">
              <label class="form-label mb-0 me-2 fw-semibold text-white input-label">
                <i class="bi bi-arrow-up-circle me-1"></i>Output:
              </label>
              <select
                class="form-select form-select-sm custom-select"
                formControlName="outputVoltage"
                (change)="onOutputVoltageChange($any($event.target).value)"
                style="min-width: 150px; max-width: 150px;"
              >
                <option value="0">Select...</option>
                <option value="1">120V</option>
                <option value="2">240V</option>
                <option value="3">208V</option>
                <option value="4">480V</option>
                <option value="6">575V</option>
                <option value="5">600V</option>
              </select>
            </div>

            <!-- Tolerance Display -->
            <div class="tolerance-info d-flex align-items-center" *ngIf="selectedOutputVoltage && selectedOutputVoltage !== '0'">
              <div class="d-flex flex-column">
                <small class="text-primary fw-semibold mb-1">
                  <i class="bi bi-info-circle me-1"></i>
                  V-Tolerance: {{ getOutputVoltageTolerance(selectedOutputVoltage) }}
                </small>
                <small class="text-info fw-semibold">
                  <i class="bi bi-speedometer me-1"></i>
                  Freq: 58 Hz - 62 Hz
                </small>
              </div>
            </div>

            <!-- Filter Current Toggle -->
            <div class="config-item d-flex align-items-center">
              <div class="custom-toggle-container">
                <input
                  class="custom-toggle-input"
                  type="checkbox"
                  formControlName="outputFilterCurrent"
                  id="outputFilterCurrent"
                />
                <label class="custom-toggle-label" for="outputFilterCurrent">
                  <span class="toggle-switch"></span>
                  <span class="toggle-text">
                    <i class="bi bi-funnel me-1"></i>Filter Current
                  </span>
                </label>
              </div>
            </div>

            <!-- THD % Toggle -->
            <div class="config-item d-flex align-items-center">
              <div class="custom-toggle-container">
                <input
                  class="custom-toggle-input"
                  type="checkbox"
                  formControlName="outputThdPercent"
                  id="outputThdPercent"
                />
                <label class="custom-toggle-label" for="outputThdPercent">
                  <span class="toggle-switch"></span>
                  <span class="toggle-text">
                    <i class="bi bi-graph-up me-1"></i>THD %
                  </span>
                </label>
              </div>
            </div>
          </div>

          <!-- Output Phase Measurements -->
          <div class="mb-4">
            <h6 class="fw-bold text-success mb-3">
              <i class="bi bi-outlet me-2"></i>
              Output Phase Measurements
              <small class="text-muted ms-2">Voltage, Current, Load%, and Frequency readings</small>
            </h6>

    <!-- 120V Output -->
    <div *ngIf="showOutput120" class="mb-4">
      <div class="row g-3">
        <!-- Voltage A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output120VoltA"
                      step="0.01"
                      id="output120VoltA"
                    />
                    <label for="output120VoltA" class="text-muted">Voltage</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output120VoltA_PF" id="output120VoltA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output120VoltA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output120CurrA"
                      step="0.01"
                      id="output120CurrA"
                    />
                    <label for="output120CurrA" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output120CurrA_PF" id="output120CurrA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output120CurrA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load120A"
                      step="0.01"
                      id="load120A"
                    />
                    <label for="load120A" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load120A_PF" id="load120A_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load120A_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Frequency Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Frequency</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output120Freq"
                      step="0.01"
                      id="output120Freq"
                    />
                    <label for="output120Freq" class="text-muted">Frequency</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output120Freq_PF" id="output120Freq_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output120Freq_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Total Load Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Total Load</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2 align-items-stretch">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="total120Load"
                      step="0.01"
                      id="total120Load"
                      readonly
                    />
                    <label for="total120Load" class="text-muted">Total Load</label>
                  </div>
                </div>
                <div class="col-4 d-flex align-items-end">
                  <button type="button" class="btn btn-dark w-100" (click)="calculateLoadPercentage('1')">Calculate</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 240V Output -->
    <div *ngIf="showOutput240" class="mb-4">
      <div class="row g-3">
        <!-- Voltage A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output240VoltA"
                      step="0.01"
                      id="output240VoltA"
                    />
                    <label for="output240VoltA" class="text-muted">Voltage</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output240VoltA_PF" id="output240VoltA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output240VoltA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output240CurrA"
                      step="0.01"
                      id="output240CurrA"
                    />
                    <label for="output240CurrA" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output240CurrA_PF" id="output240CurrA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output240CurrA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output240VoltB"
                      step="0.01"
                      id="output240VoltB"
                    />
                    <label for="output240VoltB" class="text-muted">Voltage</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output240VoltB_PF" id="output240VoltB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output240VoltB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output240CurrB"
                      step="0.01"
                      id="output240CurrB"
                    />
                    <label for="output240CurrB" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output240CurrB_PF" id="output240CurrB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output240CurrB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load240A"
                      step="0.01"
                      id="load240A"
                    />
                    <label for="load240A" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load240A_PF" id="load240A_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load240A_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load240B"
                      step="0.01"
                      id="load240B"
                    />
                    <label for="load240B" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load240B_PF" id="load240B_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load240B_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Frequency Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Frequency</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output240Freq"
                      step="0.01"
                      id="output240Freq"
                    />
                    <label for="output240Freq" class="text-muted">Frequency</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output240Freq_PF" id="output240Freq_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output240Freq_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Total Load Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Total Load</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2 align-items-stretch">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="total240Load"
                      step="0.01"
                      id="total240Load"
                      readonly
                    />
                    <label for="total240Load" class="text-muted">Total Load</label>
                  </div>
                </div>
                <div class="col-4 d-flex align-items-end">
                  <button type="button" class="btn btn-dark w-100" (click)="calculateLoadPercentage('2')">Calculate</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 208V Output -->
    <div *ngIf="showOutput208" class="mb-4">
      <div class="row g-3">
        <!-- Voltage A-B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage A-B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output208VoltAB"
                      step="0.01"
                      id="output208VoltAB"
                    />
                    <label for="output208VoltAB" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('AB') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(outputForm.value.output208VoltAB) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output208VoltAB_PF" id="output208VoltAB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output208VoltAB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output208CurrA"
                      step="0.01"
                      id="output208CurrA"
                    />
                    <label for="output208CurrA" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output208CurrA_PF" id="output208CurrA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output208CurrA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage B-C Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage B-C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output208VoltBC"
                      step="0.01"
                      id="output208VoltBC"
                    />
                    <label for="output208VoltBC" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('BC') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(outputForm.value.output208VoltBC) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output208VoltBC_PF" id="output208VoltBC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output208VoltBC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output208CurrB"
                      step="0.01"
                      id="output208CurrB"
                    />
                    <label for="output208CurrB" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output208CurrB_PF" id="output208CurrB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output208CurrB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage C-A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage C-A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output208VoltCA"
                      step="0.01"
                      id="output208VoltCA"
                    />
                    <label for="output208VoltCA" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('CA') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(outputForm.value.output208VoltCA) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output208VoltCA_PF" id="output208VoltCA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output208VoltCA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current C Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output208CurrC"
                      step="0.01"
                      id="output208CurrC"
                    />
                    <label for="output208CurrC" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output208CurrC_PF" id="output208CurrC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output208CurrC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load208A"
                      step="0.01"
                      id="load208A"
                    />
                    <label for="load208A" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load208A_PF" id="load208A_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load208A_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load208B"
                      step="0.01"
                      id="load208B"
                    />
                    <label for="load208B" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load208B_PF" id="load208B_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load208B_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % C Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load208C"
                      step="0.01"
                      id="load208C"
                    />
                    <label for="load208C" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load208C_PF" id="load208C_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load208C_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Frequency Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Frequency</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output208Freq"
                      step="0.01"
                      id="output208Freq"
                    />
                    <label for="output208Freq" class="text-muted">Frequency</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output208Freq_PF" id="output208Freq_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output208Freq_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Total Load Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Total Load</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2 align-items-stretch">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="total208Load"
                      step="0.01"
                      id="total208Load"
                      readonly
                    />
                    <label for="total208Load" class="text-muted">Total Load</label>
                  </div>
                </div>
                <div class="col-4 d-flex align-items-end">
                  <button type="button" class="btn btn-dark w-100" (click)="calculateLoadPercentage('3')">Calculate</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 480V Output -->
    <div *ngIf="showOutput480" class="mb-4">
      <div class="row g-3">
        <!-- Voltage A-B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage A-B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output480VoltAB"
                      step="0.01"
                      id="output480VoltAB"
                    />
                    <label for="output480VoltAB" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('AB') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(outputForm.value.output480VoltAB) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output480VoltAB_PF" id="output480VoltAB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output480VoltAB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output480CurrA"
                      step="0.01"
                      id="output480CurrA"
                    />
                    <label for="output480CurrA" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output480CurrA_PF" id="output480CurrA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output480CurrA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage B-C Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage B-C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output480VoltBC"
                      step="0.01"
                      id="output480VoltBC"
                    />
                    <label for="output480VoltBC" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('BC') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(outputForm.value.output480VoltBC) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output480VoltBC_PF" id="output480VoltBC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output480VoltBC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output480CurrB"
                      step="0.01"
                      id="output480CurrB"
                    />
                    <label for="output480CurrB" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output480CurrB_PF" id="output480CurrB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output480CurrB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage C-A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage C-A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output480VoltCA"
                      step="0.01"
                      id="output480VoltCA"
                    />
                    <label for="output480VoltCA" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('CA') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(outputForm.value.output480VoltCA) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output480VoltCA_PF" id="output480VoltCA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output480VoltCA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current C Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output480CurrC"
                      step="0.01"
                      id="output480CurrC"
                    />
                    <label for="output480CurrC" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output480CurrC_PF" id="output480CurrC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output480CurrC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load480A"
                      step="0.01"
                      id="load480A"
                    />
                    <label for="load480A" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load480A_PF" id="load480A_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load480A_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load480B"
                      step="0.01"
                      id="load480B"
                    />
                    <label for="load480B" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load480B_PF" id="load480B_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load480B_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % C Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load480C"
                      step="0.01"
                      id="load480C"
                    />
                    <label for="load480C" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load480C_PF" id="load480C_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load480C_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Frequency Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Frequency</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output480Freq"
                      step="0.01"
                      id="output480Freq"
                    />
                    <label for="output480Freq" class="text-muted">Frequency</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output480Freq_PF" id="output480Freq_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output480Freq_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Total Load Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Total Load</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2 align-items-stretch">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="total480Load"
                      step="0.01"
                      id="total480Load"
                      readonly
                    />
                    <label for="total480Load" class="text-muted">Total Load</label>
                  </div>
                </div>
                <div class="col-4 d-flex align-items-end">
                  <button type="button" class="btn btn-dark w-100" (click)="calculateLoadPercentage('4')">Calculate</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 575V Output -->
    <div *ngIf="showOutput575" class="mb-4">
      <div class="row g-3">
        <!-- Voltage A-B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage A-B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output575VoltAB"
                      step="0.01"
                      id="output575VoltAB"
                    />
                    <label for="output575VoltAB" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('AB') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(outputForm.value.output575VoltAB) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output575VoltAB_PF" id="output575VoltAB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output575VoltAB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output575CurrA"
                      step="0.01"
                      id="output575CurrA"
                    />
                    <label for="output575CurrA" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output575CurrA_PF" id="output575CurrA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output575CurrA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage B-C Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage B-C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output575VoltBC"
                      step="0.01"
                      id="output575VoltBC"
                    />
                    <label for="output575VoltBC" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('BC') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(outputForm.value.output575VoltBC) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output575VoltBC_PF" id="output575VoltBC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output575VoltBC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output575CurrB"
                      step="0.01"
                      id="output575CurrB"
                    />
                    <label for="output575CurrB" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output575CurrB_PF" id="output575CurrB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output575CurrB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage C-A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage C-A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output575VoltCA"
                      step="0.01"
                      id="output575VoltCA"
                    />
                    <label for="output575VoltCA" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('CA') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(outputForm.value.output575VoltCA) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output575VoltCA_PF" id="output575VoltCA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output575VoltCA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current C Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output575CurrC"
                      step="0.01"
                      id="output575CurrC"
                    />
                    <label for="output575CurrC" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output575CurrC_PF" id="output575CurrC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output575CurrC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load575A"
                      step="0.01"
                      id="load575A"
                    />
                    <label for="load575A" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load575A_PF" id="load575A_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load575A_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load575B"
                      step="0.01"
                      id="load575B"
                    />
                    <label for="load575B" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load575B_PF" id="load575B_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load575B_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % C Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load575C"
                      step="0.01"
                      id="load575C"
                    />
                    <label for="load575C" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load575C_PF" id="load575C_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load575C_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Frequency Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Frequency</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output575Freq"
                      step="0.01"
                      id="output575Freq"
                    />
                    <label for="output575Freq" class="text-muted">Frequency</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output575Freq_PF" id="output575Freq_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output575Freq_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Total Load Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Total Load</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2 align-items-stretch">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="total575Load"
                      step="0.01"
                      id="total575Load"
                      readonly
                    />
                    <label for="total575Load" class="text-muted">Total Load</label>
                  </div>
                </div>
                <div class="col-4 d-flex align-items-end">
                  <button type="button" class="btn btn-dark w-100" (click)="calculateLoadPercentage('6')">Calculate</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 600V Output -->
    <div *ngIf="showOutput600" class="mb-4">
      <div class="row g-3">
        <!-- Voltage A-B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage A-B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output600VoltAB"
                      step="0.01"
                      id="output600VoltAB"
                    />
                    <label for="output600VoltAB" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('AB') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(outputForm.value.output600VoltAB) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output600VoltAB_PF" id="output600VoltAB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output600VoltAB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output600CurrA"
                      step="0.01"
                      id="output600CurrA"
                    />
                    <label for="output600CurrA" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output600CurrA_PF" id="output600CurrA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output600CurrA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage B-C Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage B-C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output600VoltBC"
                      step="0.01"
                      id="output600VoltBC"
                    />
                    <label for="output600VoltBC" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('BC') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(outputForm.value.output600VoltBC) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output600VoltBC_PF" id="output600VoltBC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output600VoltBC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output600CurrB"
                      step="0.01"
                      id="output600CurrB"
                    />
                    <label for="output600CurrB" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output600CurrB_PF" id="output600CurrB_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output600CurrB_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Voltage C-A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Voltage C-A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output600VoltCA"
                      step="0.01"
                      id="output600VoltCA"
                    />
                    <label for="output600VoltCA" class="text-muted">Voltage</label>
                  </div>
                  <!-- Phase-to-Neutral Display under voltage label -->
                  <div class="p-n-display-inline mt-1">
                    <small class="text-muted d-flex align-items-center justify-content-between">
                      <span>
                        <i class="bi bi-calculator text-info me-1"></i>
                        {{ getPhaseToNeutralLabel('CA') }}:
                      </span>
                      <span class="badge bg-light text-dark ms-2">
                        {{ calculatePhaseToNeutral(outputForm.value.output600VoltCA) || '—' }}V
                      </span>
                    </small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output600VoltCA_PF" id="output600VoltCA_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output600VoltCA_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Current C Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Current C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output600CurrC"
                      step="0.01"
                      id="output600CurrC"
                    />
                    <label for="output600CurrC" class="text-muted">Current</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output600CurrC_PF" id="output600CurrC_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output600CurrC_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % A Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % A</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load600A"
                      step="0.01"
                      id="load600A"
                    />
                    <label for="load600A" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load600A_PF" id="load600A_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load600A_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % B Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % B</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load600B"
                      step="0.01"
                      id="load600B"
                    />
                    <label for="load600B" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load600B_PF" id="load600B_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load600B_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Load % C Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Load % C</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="load600C"
                      step="0.01"
                      id="load600C"
                    />
                    <label for="load600C" class="text-muted">Load %</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="load600C_PF" id="load600C_PF">
                      <option value="">Select...</option>
                      <option value="P">Pass</option>
                      <option value="F">Fail</option>
                    </select>
                    <label for="load600C_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Frequency Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Frequency</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="output600Freq"
                      step="0.01"
                      id="output600Freq"
                    />
                    <label for="output600Freq" class="text-muted">Frequency</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-floating">
                    <select class="form-select power-select" formControlName="output600Freq_PF" id="output600Freq_PF">
                      <option value="">Select...</option>
                      <option *ngFor="let o of passFailOptions" [value]="o.value">{{ o.label }}</option>
                    </select>
                    <label for="output600Freq_PF" class="text-muted">Status</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Total Load Card -->
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="power-measurement-card">
            <div class="power-card-header">
              <div class="power-card-title">
                <span class="fw-semibold text-dark">Total Load</span>
              </div>
            </div>
            <div class="power-card-body">
              <div class="row g-2 align-items-stretch">
                <div class="col-8">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control power-input"
                      formControlName="total600Load"
                      step="0.01"
                      id="total600Load"
                      readonly
                    />
                    <label for="total600Load" class="text-muted">Total Load</label>
                  </div>
                </div>
                <div class="col-4 d-flex align-items-end">
                  <button type="button" class="btn btn-dark w-100" (click)="calculateLoadPercentage('5')">Calculate</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Output Filter Current Detail Section -->
    <div *ngIf="showOutputFilterCurrent" class="dynamic-section mt-3">
      <div class="mb-3">
        <h6 class="fw-bold text-primary mb-3">
          <i class="bi bi-funnel me-2"></i>
          Output Filter Current Measurements
          <small class="text-muted ms-2">Filter current readings for each phase</small>
        </h6>

        <div class="row g-3">
          <div class="col-xl-4 col-lg-6 col-md-12" *ngFor="let phase of ['A','B','C']; let i = index">
            <div class="power-measurement-card">
              <div class="power-card-header">
                <div class="power-card-title">
                  <i class="bi bi-electric-scooter text-primary me-2"></i>
                  <span class="fw-semibold text-dark">Filter Current {{ phase }}</span>
                </div>
              </div>
              <div class="power-card-body">
                <div class="row g-2">
                  <div class="col-8">
                    <div class="form-floating">
                      <input
                        type="text"
                        class="form-control power-input"
                        [formControlName]="'outputFilterCurrent' + phase"
                        [id]="'outputFilterCurrent' + phase"
                      />
                      <label class="text-muted" [for]="'outputFilterCurrent' + phase">Current (A)</label>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="form-floating">
                      <select
                        class="form-select power-select"
                        [formControlName]="'outputFilterCurrent' + phase + '_PF'"
                        [id]="'outputFilterCurrent' + phase + 'Status'"
                      >
                        <option value="">Select status...</option>
                        <option value="P">Pass</option>
                        <option value="F">Fail</option>
                        <option value="A">N/A</option>
                      </select>
                      <label class="text-muted" [for]="'outputFilterCurrent' + phase + 'Status'">Status</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Output THD Detail Section -->
    <div *ngIf="showOutputTHD" class="dynamic-section mt-3">
      <div class="mb-3">
        <h6 class="fw-bold text-warning mb-3">
          <i class="bi bi-graph-up-arrow me-2"></i>
          Output THD (Total Harmonic Distortion) Measurements
          <small class="text-muted ms-2">THD percentage readings for each phase</small>
        </h6>

        <div class="row g-3">
          <div class="col-xl-4 col-lg-6 col-md-12" *ngFor="let phase of ['A','B','C']; let i = index">
            <div class="power-measurement-card">
              <div class="power-card-header">
                <div class="power-card-title">
                  <i class="bi bi-activity text-warning me-2"></i>
                  <span class="fw-semibold text-dark">THD {{ phase }}</span>
                </div>
              </div>
              <div class="power-card-body">
                <div class="row g-2">
                  <div class="col-8">
                    <div class="form-floating">
                      <input
                        type="text"
                        class="form-control power-input"
                        [formControlName]="'outputThd' + phase"
                        [id]="'outputThd' + phase"
                      />
                      <label class="text-muted" [for]="'outputThd' + phase">THD (%)</label>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="form-floating">
                      <select
                        class="form-select power-select"
                        [formControlName]="'outputThd' + phase + '_PF'"
                        [id]="'outputThd' + phase + 'Status'"
                      >
                        <option value="">Select status...</option>
                        <option value="P">Pass</option>
                        <option value="F">Fail</option>
                        <option value="A">N/A</option>
                      </select>
                      <label class="text-muted" [for]="'outputThd' + phase + 'Status'">Status</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
          </div>
          <!-- End Output Phase Measurements -->
        </form>
      </div>
    </div>
  </div>
</section>

<!-- Comments -->
<section class="ups-readings-section">
  <div class="ups-section-card">
    <div class="ups-section-header">
      <div class="ups-section-title">
        <i class="bi bi-chat-left-text me-2 text-primary"></i>
        <h5 class="mb-0">Comments</h5>
        <small class="text-muted">Additional notes and observations</small>
      </div>
    </div>
    <div class="ups-section-content show">
      <form class="ups-form" [formGroup]="commentsForm">
        <div class="form-group-modern">
          <div class="form-floating">
            <textarea rows="3" class="form-control" placeholder="Please note the reason, if any." formControlName="comments5" id="comments5"></textarea>
            <label for="comments5">Comments</label>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>

      </div> <!-- /ups-readings-form -->
    </div> <!-- /card-body -->
  </div> <!-- /card ups-main-card -->
</div> <!-- /container-fluid ups-readings-container -->
