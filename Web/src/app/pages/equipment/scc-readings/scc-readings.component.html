<!-- SCC (System Control Cabinet) Readings Page -->
<div class="container-fluid ups-readings-container">
  <!-- Header: Back, Title, Save -->
  <div class="ups-readings-header__top mb-4 d-flex justify-content-between align-items-center">
    <button type="button" class="btn btn-sm btn-primary ups-readings-header__back" (click)="goBack()" [disabled]="saving">
      <i class="bi bi-arrow-left me-2"></i>
      Back
    </button>

    <div class="ups-page-title">
      <h2 class="fw-bold text-primary mb-0">
        <i class="bi bi-diagram-3 me-2"></i>
        System Control Cabinet (SCC)
      </h2>
      <div class="text-dark mt-2">
        <span class="fw-semibold">Job ID: {{ callNbr || 'N/A' }} | Equipment No: {{ equipNo || 'N/A' }} | Equipment ID: {{ equipId || 'N/A' }}</span>
      </div>
    </div>

    <button type="button" class="btn btn-sm btn-primary ups-readings-header__action" (click)="saveSCC()" [disabled]="saving">
      <span *ngIf="saving" class="spinner-border spinner-border-sm me-2" role="status"></span>
      <i *ngIf="!saving" class="bi bi-check-circle me-2"></i>
      {{ saving ? 'Saving...' : 'Save SCC' }}
    </button>
  </div>

  <!-- Messages -->
  <div class="ups-readings-messages mb-3" *ngIf="errorMessage || successMessage">
    <div *ngIf="errorMessage" class="alert alert-danger d-inline-flex align-items-center">
      <i class="bi bi-exclamation-triangle-fill me-2"></i>
      <span [innerHTML]="errorMessage"></span>
    </div>
    <div *ngIf="successMessage" class="alert alert-success d-inline-flex align-items-center">
      <i class="bi bi-check-circle-fill me-2"></i>
      <span>{{ successMessage }}</span>
    </div>
  </div>

  <!-- Main card wrapper -->
  <div class="card shadow-sm ups-main-card">
    <div class="card-body">
      <div class="ups-readings-form">

        <!-- Equipment Verification -->
        <section class="ups-readings-section mb-4">
          <div class="ups-section-card">
            <div class="ups-section-header">
              <div class="ups-section-title">
                <i class="bi bi-gear-wide-connected me-2 text-primary"></i>
                <h5 class="mb-0">Equipment Verification</h5>
              </div>
            </div>
            <div class="ups-section-content show">
              <form class="ups-form" [formGroup]="equipmentVerificationForm">
                <div class="form-group-modern">
                  <div class="row g-3">
                    <div class="col-md-3">
                      <div class="form-floating">
                        <select class="form-select" formControlName="manufacturer" id="manufacturer" required>
                          <option value="" disabled>Select manufacturer</option>
                          <option *ngFor="let m of manufacturers" [value]="m.value">{{ m.label }}</option>
                        </select>
                        <label for="manufacturer">Make <span class="text-danger">*</span></label>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="modelNo" id="modelNo" placeholder="Model No" required />
                        <label for="modelNo">Model No <span class="text-danger">*</span></label>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="serialNo" id="serialNo" placeholder="Serial No" />
                        <label for="serialNo">Serial No</label>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="location" id="location" placeholder="Location" />
                        <label for="location">Location</label>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="form-floating">
                        <input type="date" class="form-control" formControlName="dateCode" id="dateCode" placeholder="Date Code" required />
                        <label for="dateCode">Date Code <span class="text-danger">*</span></label>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="form-floating">
                        <input type="number" class="form-control" formControlName="temperature" id="temperature" placeholder="Temperature" required />
                        <label for="temperature">Temperature (Â°F) <span class="text-danger">*</span></label>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="form-floating">
                        <select class="form-select" formControlName="status" id="status">
                          <option *ngFor="let option of statusOptions" [value]="option.value">{{ option.label }}</option>
                        </select>
                        <label for="status">Status</label>
                      </div>
                    </div>
                    <div class="col-12">
                      <div class="form-floating">
                        <textarea class="form-control" formControlName="statusNotes" id="statusNotes" 
                                  placeholder="Status Notes" style="height: 80px"></textarea>
                        <label for="statusNotes">Status Notes</label>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </section>

        <!-- Reconciliation Section -->
        <section class="ups-readings-section mb-4">
          <div class="ups-section-card">
            <div class="ups-section-header">
              <div class="ups-section-title">
                <i class="bi bi-check2-square me-2 text-primary"></i>
                <h5 class="mb-0">Reconciliation</h5>
              </div>
              <div class="form-check form-check-danger ms-auto">
                <input class="form-check-input" type="checkbox" formControlName="verified" 
                       id="verified" [formGroup]="reconciliationForm">
                <label class="form-check-label fw-bold text-danger" for="verified">
                  Verified <span class="text-danger">*</span>
                </label>
              </div>
            </div>
            <div class="ups-section-content show">
              <form class="ups-form" [formGroup]="reconciliationForm">
                <div class="table-responsive">
                  <table class="table table-bordered align-middle">
                    <thead class="table-light">
                      <tr>
                        <th style="width: 15%">Field</th>
                        <th style="width: 20%">Recorded Value</th>
                        <th style="width: 15%">Is this Correct?</th>
                        <th style="width: 20%">Actual Value</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- Model Row -->
                      <tr>
                        <td class="fw-semibold">Model</td>
                        <td>
                          <input type="text" class="form-control" formControlName="recModel" readonly />
                        </td>
                        <td>
                          <select class="form-select" formControlName="recModelCorrect">
                            <option *ngFor="let option of yesNoOptions" [value]="option.value">{{ option.label }}</option>
                          </select>
                        </td>
                        <td>
                          <input type="text" class="form-control text-danger" formControlName="actModel" 
                                 placeholder="Enter actual model if incorrect" />
                        </td>
                      </tr>
                      <!-- Serial Number Row -->
                      <tr>
                        <td class="fw-semibold">Serial No</td>
                        <td>
                          <input type="text" class="form-control" formControlName="recSerialNo" readonly />
                        </td>
                        <td>
                          <select class="form-select" formControlName="recSerialNoCorrect">
                            <option *ngFor="let option of yesNoOptions" [value]="option.value">{{ option.label }}</option>
                          </select>
                        </td>
                        <td>
                          <input type="text" class="form-control text-danger" formControlName="actSerialNo" 
                                 placeholder="Enter actual serial no if incorrect" />
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </form>
            </div>
          </div>
        </section>

        <!-- Voltage Settings -->
        <section class="ups-readings-section mb-4">
          <div class="ups-section-card">
            <div class="ups-section-header">
              <div class="ups-section-title">
                <i class="bi bi-lightning-charge me-2 text-primary"></i>
                <h5 class="mb-0">Voltage Settings</h5>
              </div>
            </div>
            <div class="ups-section-content show">
              <form class="ups-form" [formGroup]="voltageSettingsForm">
                <div class="form-group-modern">
                  <!-- Bypass Voltages -->
                  <div class="row g-3 mb-3">
                    <div class="col-12">
                      <label class="form-label fw-semibold">Bypass Voltages (Voltage readings from display only)</label>
                    </div>
                    <div class="col-md-4">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="bypassVoltA" id="bypassVoltA" placeholder="A" />
                        <label for="bypassVoltA">A (Volts)</label>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="bypassVoltB" id="bypassVoltB" placeholder="B" />
                        <label for="bypassVoltB">B (Volts)</label>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="bypassVoltC" id="bypassVoltC" placeholder="C" />
                        <label for="bypassVoltC">C (Volts)</label>
                      </div>
                    </div>
                  </div>

                  <!-- Power Supply Voltages -->
                  <div class="row g-3 mb-3">
                    <div class="col-12">
                      <label class="form-label fw-semibold">Power Supply Voltages (Voltage readings from display only)</label>
                    </div>
                    <div class="col-md-4">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="supplyVoltA" id="supplyVoltA" placeholder="A" />
                        <label for="supplyVoltA">A (Volts)</label>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="supplyVoltB" id="supplyVoltB" placeholder="B" />
                        <label for="supplyVoltB">B (Volts)</label>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="supplyVoltC" id="supplyVoltC" placeholder="C" />
                        <label for="supplyVoltC">C (Volts)</label>
                      </div>
                    </div>
                  </div>

                  <!-- System Output Voltage -->
                  <div class="row g-3 mb-3">
                    <div class="col-12">
                      <label class="form-label fw-semibold">System Output Voltage</label>
                    </div>
                    <div class="col-md-4">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="outputVoltA" id="outputVoltA" placeholder="A" />
                        <label for="outputVoltA">A (Volts)</label>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="outputVoltB" id="outputVoltB" placeholder="B" />
                        <label for="outputVoltB">B (Volts)</label>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="outputVoltC" id="outputVoltC" placeholder="C" />
                        <label for="outputVoltC">C (Volts)</label>
                      </div>
                    </div>
                  </div>

                  <!-- Additional Settings -->
                  <div class="row g-3">
                    <div class="col-md-3">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="firmwareVersion" id="firmwareVersion" placeholder="Firmware Version" />
                        <label for="firmwareVersion">System Firmware Version</label>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="phaseError" id="phaseError" placeholder="Phase Error" />
                        <label for="phaseError">Phase Error Degree Angle</label>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="partNos" id="partNos" placeholder="Part Numbers" />
                        <label for="partNos">SCC Part Number</label>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="form-floating">
                        <input type="text" class="form-control" formControlName="loadCurrent" id="loadCurrent" placeholder="Load Current" />
                        <label for="loadCurrent">System Load Current</label>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </section>

        <!-- Comments -->
        <section class="ups-readings-section mb-4">
          <div class="ups-section-card">
            <div class="ups-section-header">
              <div class="ups-section-title">
                <i class="bi bi-chat-left-text me-2 text-primary"></i>
                <h5 class="mb-0">Comments</h5>
              </div>
            </div>
            <div class="ups-section-content show">
              <form class="ups-form" [formGroup]="commentsForm">
                <div class="form-floating">
                  <textarea class="form-control" formControlName="comments" id="comments" 
                            placeholder="Comments" style="height: 100px"></textarea>
                  <label for="comments">Please note the reason, if any</label>
                </div>
              </form>
            </div>
          </div>
        </section>

      </div>
    </div>
  </div>
</div>
